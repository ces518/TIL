# 지옥 스터디 - 23 나쁜 것 안보기

[23.1 목표: 코드를 적게 작성하기](#231-목표-코드를-적게-작성하기)

[23.2 안티패턴: 짚 없이 벽돌 만들기](#232-안티패턴-짚-없이-벽돌-만들기)

[23.3 안티패턴 인식 방법](#233-안티패턴-인식-방법)

[23.4 안티패턴 사용이 합당한 경우](#224-안티패턴-사용이-합당한-경우)

## 23.1 목표: 코드를 적게 작성하기

누구나 우아한 코드를 작성하고 싶어한다. 즉, 적은 코드로 멋진 일을 하고 싶다. <br/>
작업이 멋지고 코드가 적을수록 우아함은 커진다. <br/>
간결한 코드를 작성해야 하는 이성적인 이유도 있다.
- 작동하는 애플리케이션 코드를 빨리 작성할 수 있다.
- 테스트하고 문서화하고 리뷰해야할 양이 줄어든다.
- 코드가 적으면 버그도 적다.

## 23.2 안티패턴: 짚 없이 벽돌 만들기

개발자는 다음과 같은 두 가지 형태로 **나쁜 것 안보기 안티패턴** 을 사용한다. <br/>
- 데이터베이스 API 의 리턴 값을 무시한다.
- 애플리케이션 코드에 산재해 있는 SQL 코드의 단편만을 본다.
두 가지 경우 모두 쉽게 사용할 수 있는 정보를 놓칠 수 있다.

### 진단 없는 진료

코드가 간결하더라도, 함수로 부터 리턴된 상태값을 무시한다면 문제가 생겼는지 알 수 없다. <br/>
리턴 값이나 예외를 확인하는 것은 코드에 아무 것도 더해지지 않는다고 느낀다. <br/>
치명적인 에러가 발생했는데 제대로 처리되지 않는다면 애플리케이션 코드가 깔끔하고 간결한 것은 위안이 되지 않는다.

### 읽기간 행

나쁜 것 안보기 안티패턴에 해당하는 흔한 나쁜 습관은 **SQL 쿼리를 문자열로 생성하는 애플리케이션 코드를 뚫어져라 쳐다보는 것** 이다. <br/>
개발자들은 이런 문제를 디버깅할 때 SQL 자체를 보지 않고 SQL 을 만들어내는 코드를 살펴보느라 엄청나게 많은 시간과 노력을 낭비한다.

## 23.3 안티패턴 인식 방법

다음과 같은 말을 들으면 나쁜 것 안보기 안티패턴에 직면한 것일 수 있다.
- 데이터베이스를 조회한 다음에 프로그램이 죽어버려.
- 내 SQL 에서 에러 찾는 것을 도와주겠니? 내 코드는 여기있어
- 내 코드를 에러 처리로 어지럽히고 싶지 않아.

## 23.4 안티패턴 사용이 합당한 경우

에러에 대해 정말 아무것도 할 것이 없다면 에러 검사를 생략할 수 있다. <br/>
객체지향 언어에서는 처리할 책임을 지지않으면서 예외를 던질 수 있다. <br/>
해당 코드를 호출하는 곳에서 예외를 처리할 책임이 있다. 따라서 예외가 호출 스택의 위로 전달되도록 할 수 있다.

## 해법: 에러에서 우아하게 복구하기

우아하게 남아있는 비결은 어떻게 복구하는지 아는 것이다. <br/>
실수의 원인을 인지할 수 있는 기회를 가져야 한다. 그러면 빠르고 한결같게 반응해, 다른 사람이 실수를 눈치채기 전에 리듬으로 돌아올 수 있다.

### 리듬 유지하기

데이터베이스 API 호출 후 리턴 상태나 예외를 확인하는 것이 스텝을 잘못 밟지 않는 가장 좋은 방법이다.

### 스텝 되짚기

문제를 디버깅하는데 SQL 쿼리를 생성하는 코드를 보는 대신 실제 SQL 쿼리를 확인하는 것 또한 중요하다.
- API 메서드의 인수에서 SQL 쿼리를 만들지 말고 변수를 사용해 만든다. 이러면 사용하기 전 변수 값을 확인할 기회가 생긴다.
- 로그 파일, IDE 디버거 콘솔 또는 디버깅 정보를 보여주는 브라우저 확장 기능 등 애플리케이션출력이 아닌 다른 곳에 SQL 을 출력하도록 한다.
- SQL 쿼리를 웹 애플리케이션의 HTML 주석으로 출력하지 않는다. 페이지 소스는 어느 사용자든 볼 수 있다. 해커가 SQL 쿼리를 보면 데이터베이스 구조에 대한 많은 정보가 노출될 수 있다.

> 코드의 문제를 해결하는 것만으로도 이미 충분히 어렵다. <br/> 보지 않고 작업해 스스로를 방해하지 마라.
